pm.test("DELETE /api/Patients/email/{email}/delete Tests", function () {
    // Verifies if pm.response exists
    if (pm.response) {
        const statusCode = pm.response.code;

        // Test if the status code is 204 (No Content)
        if (statusCode === 204) {
            pm.test("Status code is 204", function () {
                pm.response.to.have.status(204);
            });

            // Verifies if the response body is empty (as expected for a successful deletion)
            pm.test("Response body is empty", function () {
                pm.expect(pm.response.text()).to.be.empty; // Verifies if the response body is empty
            });

        } else if (statusCode === 404) {
            // Test if the status code is 404 (Not Found)
            pm.test("Status code is 404", function () {
                pm.response.to.have.status(404);
            });

            // Verifies the specific error message for patient not found
            var responseText = pm.response.text();
            pm.test("Response message is 'Patient not found.'", function () {
                pm.expect(responseText).to.eql("Patient not found.");
            });

        } else {
            // Verifies if the status code is either 204 or 404, otherwise it's an unexpected status
            pm.test("Unexpected status code", function () {
                pm.expect(statusCode).to.be.oneOf([204, 404]);
            });
        }
    } else {
        pm.test("Response is undefined", function () {
            pm.expect.fail("No response received from the server.");
        });
    }
});
